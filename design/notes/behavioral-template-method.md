本文摘自书籍[《设计模式》](https://www.amazon.cn/dp/B005XUK0DE/ref=sr_1_1?s=books&ie=UTF8&qid=1525848051&sr=1-1&keywords=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F+%E5%88%98%E4%BC%9F)

## 行为型 - 模板模式（Template Method Pattern）

### 定义

定义一个操作中算法的骨架，而将一些步骤延迟到子类中，模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。是一种行为型模式。

### 模式结构

抽象类，定义了一系列基本操作，这些基本操作可以是具体的，也可以是抽象的，每一个基本操作对应算法的一个步骤，在其子类可以冲定义并实现一个算法的各个步骤。同时在抽象类中实现了一个模板方法，用于定于一个算法的骨架，此模板方法不仅可以调用基本操作，还可以调用在抽象类中声明而在子类实现的抽象方法，当然也可以调用其他对象中的方法。下面`display`方法就是模板方法，而之后的一系列方法就是算法的步骤。

```java
public abstract FileDisplay {
    
    public void display(String filePath) {
        validatePath(filePath);
        File file = readFile(filePath);
        displayFile(file);
    }
    
    public abstract void validatePath(String filePath);
    
    public File readFile(String filePath) {
        //文件读取实现
    }
    
    public abstract void displayFile();
}
```

具体子类可以根据情况对抽象类的方法进行重写和实现，不再赘述。

### 优点

模板方法模式的优点：

- 模板方法模式在一个类中形式化的定义算法，而由它的子类实现细节的处理。模板方法模式的优势是在子类定义详细的处理算法时不会改变算法的结构。
- 模板方法模式是一种代码复用的基本技术，它在类库设计中尤为重要，它提取了类库中的公共行为，将公共行为放在父类中，而通过其子类来实现不同的行为。
- 模板方法模式导致一种反向的控制结构，通过一个父类调用其子类的操作，通过对子类的扩展增加新的行为，符合开闭原则。

### 缺点

模板方法模式的缺点：

- 每个不同的实现都需要定义一个子类，这回导致类的个数增加，系统更加庞大，设计也更加抽象，但是符合单一职责原则。

### 适用环境

模板方法模式的适用环境：

- 一次性实现一个算法的不变部分，并将可变行为留给子类来实现。
- 各子类中公共的行为应被提取出来并集中到一个公共父类中以避免代码重复。
- 对一些复杂的算法进行分割。

### 应用

- Junit中TestCase