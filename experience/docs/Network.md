## 网络相关

### 1. TCP和UDP的区别？

TCP（传输控制协议），UDP（用户数据报协议）

1）TCP面向连接（如打电话先拨号建立连接）；UDP是无连接的，即发送数据之前不需要建立连接。

2）TCP提供可靠的服务。也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序达到；UDP尽最大努力交付，即不保证可靠交付。

3）TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流；UDP是面向报文，UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）。

4）每一条TCP连接只能是点到点的，UDP支持一对一，一对多，多对一和多对多的交互通信。

5）TCP首部开销20字节，UDP首部开销8字节。

6）TCP的逻辑通信信道是全双工的可靠信道，DUP则是不可靠信道。

 

### 2. 三次握手，四次挥手，为什么要四次挥手？

三次握手的目的是建立可靠的通信信道，简单来说就是数据的发送与接收，主要目的是双方确认自己与对方的发送和接收机能正常。　　　

- 第一次握手：Client什么都不能确认，Server确认了对方发送正常。

- 第二次握手：Clent确认了，自己发送、接收正常，对方发送、接收正常；Server确认了自己接收正常，对方发送正常。
- 第三次握手：Clent确认了，自己发送、接收正常，对方发送、接收正常；Server确认了自己发送、接收正常，对方发送、接收正常。

所以，经过三次握手之后，就能确认双方收发功能都正常。

- 四次挥手：

　　　　A:“喂，我不说了 (FIN)。”A->FIN_WAIT1。

　　　　B:“我知道了(ACK)。等下，上一句还没说完。Balabala…..（传输数据）”B->CLOSE_WAIT | A->FIN_WAIT2。

　　　　B:”好了，说完了，我也不说了（FIN）。”B->LAST_ACK。

　　　　A:”我知道了（ACK）。”A->TIME_WAIT | B->CLOSED。

　　　　A等待2MSL,保证B收到了消息,否则重说一次”我知道了”,A->CLOSED。



### 3. 长连接和短连接。

- 短连接：连接=》传输数据=》关闭连接。

  HTTP是无状态的，浏览器和服务器之间每进行一次http操作，就建立一次连接，但任务结束就中断连接；也可以理解为短连接是指socket连接后，发送接收完数据马上断开连接。

- 长连接：连接=》传输数据=》保持连接=》传输数据=》。。。=》关闭连接。

  长连接指建立socket连接后不管是否使用都保持连接，但安全性较差。